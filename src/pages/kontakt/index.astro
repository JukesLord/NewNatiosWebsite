---
import IndexLayout from "../../layouts/IndexLayout.astro";
import IconAdress from "@components/contact/icon-adress.astro";
import IconMobile from "@components/contact/icon-mobile.astro";
import IconEmail from "@components/contact/icon-email.astro";
import KdeKoupit from "@components/who-sells-us/who-sells-us.astro";
---

<IndexLayout title="NATIOS Kontakt">
	<div class="page-header">
		<h1>Kontakt</h1>
		<p>Pro velkoobchodní odběr nás kontaktujte skrze formulář níže nebo přes e-mail.</p>
	</div>

	<div class="contact-content">
		<div class="contact-info">
			<h2>Adresa</h2>
			<div class="contact-details">
				<div class="adress">
					<div class="icon"><IconAdress /></div>
					<div class="adress-content">
						<p>Natios Health, s.r.o.</p>
						<p>Daliborova 423/3</p>
						<p>709 00, Ostrava</p>
						<p>IČ: 28582292</p>
						<p>DIČ: CZ28582292</p>
					</div>
				</div>
				<!-- 				<div class="mobile">
					<a href="tel:+420731327327"
						><div class="icon"><IconMobile /></div>
						<span>+420 731 327 327</span>
					</a>
				</div> -->
				<div class="email">
					<a href="mailto:info@natios.cz">
						<div class="icon"><IconEmail /></div>
						<span>info@natios.cz</span>
					</a>
				</div>
			</div>
		</div>

		<div class="contact-form">
			<h2>Napište nám</h2>
			<form action="https://api.web3forms.com/submit" method="POST" id="form">
				<input type="hidden" name="access_key" value="1d43ca5a-3828-4688-8ac4-5bea1cf62df6" />
				<input type="hidden" name="subject" value="New Submission from Web3Forms" />
				<input type="checkbox" name="botcheck" id="" style="display: none;" />

				<div class="field">
					<label for="name">Jméno a příjmení*</label>
					<input type="text" name="name" id="name" placeholder="Jméno příjmení" required />
				</div>
				<div class="field">
					<label for="email">E-mail*</label>
					<input type="email" name="email" id="email" placeholder="email@domena.cz" required />
				</div>
				<div class="field">
					<label for="phone">Telefonní číslo</label>
					<input type="text" name="phone" id="phone" placeholder="+420 777 777 777" />
				</div>
				<div class="field textarea">
					<label for="message">Text vzkazu*</label>
					<textarea rows="8" name="message" id="message" placeholder="Vaše zpráva" required></textarea>
				</div>

				<button type="submit">Odeslat</button>

				<p id="result"></p>
			</form>
		</div>
		<KdeKoupit />
	</div>
</IndexLayout>

<style>
	.contact-content {
		display: flex;
		flex-direction: column;
		gap: 40px;
		padding-bottom: 60px;
		max-width: 1400px;
		margin: auto;
	}

	h1 {
		font-size: var(--fs-60-28);
		font-weight: var(--fw-bold);
		line-height: var(--lh-1_2);
		background-image: linear-gradient(180deg, var(--color-blue-300) 20%, var(--color-blue-400) 95%);
		background-clip: text;
		color: transparent;
		text-align: center;
		padding-top: var(--padding-top-section);
		padding-bottom: 0.5em;
	}
	.page-header {
		padding-bottom: 40px;
	}
	.page-header p {
		color: var(--color-white);
		font-size: var(--fs-22-12);
		line-height: var(--lh-1_25);
		font-weight: var(--fw-book);
		text-align: center;
	}
	h2 {
		color: var(--color-primary-400);
		font-weight: var(--fw-regular);
		font-size: var(--fs-26-16);
		padding-bottom: 1em;
	}
	.contact-details {
		color: var(--color-white);
		font-size: var(--fs-16-12);
		line-height: var(--lh-1_38);
		font-weight: var(--fw-book);
		display: flex;
		flex-direction: column;
		gap: 1.5em;
	}
	.contact-details .adress,
	.contact-details .mobile a,
	.contact-details .email a {
		display: flex;
		flex-direction: row;
		align-items: center;
		gap: 10px;
	}
	.contact-details .adress {
		align-items: flex-start;
	}
	.contact-details a {
		transition: color 0.2s ease-in-out;
	}
	.contact-details a:hover {
		color: var(--color-primary-400);
	}

	form {
		display: grid;
		grid-template-columns: 1fr;
		grid-template-rows: auto;
		color: var(--color-primary-400);
		font-size: var(--fs-14-12);
		font-weight: var(--fw-book);
		gap: 2em;
	}
	.field {
		display: flex;
		flex-direction: column;
	}
	label {
		padding-left: 0.875rem;
		padding-bottom: 0.75em;
	}
	input,
	textarea {
		background: var(--color-primary-800-50);
		border-style: solid;
		border-width: 1px;
		border-color: var(--color-primary-400);
		border-radius: var(--border-radius-12);
		font-size: var(--fs-13-12);
		line-height: var(--lh-1_2);
		padding: 1.25em 0.875rem;
		transition: box-shadow 0.2s ease-in-out;
		color: var(--color-white);
	}
	input:focus-within,
	textarea:focus-within {
		outline-style: solid;
		outline-width: 1px;
		outline-color: var(--color-primary-400);
		box-shadow: 0 0 12px 6px var(--color-primary-400-14);
	}
	button {
		border-style: solid;
		border-width: 2px;
		border-color: var(--color-primary-400);
		border-radius: var(--border-radius-12);
		font-size: var(--fs-14-14);
		margin: 0;
		padding: 1em 4em;
		width: 100%;
		overflow: visible;
		background: transparent;
		color: var(--color-white);
		line-height: var(--lh-1_2);
		-webkit-font-smoothing: inherit;
		-moz-osx-font-smoothing: inherit;
		-webkit-appearance: none;
	}
	button:hover,
	button:focus-within {
		transition:
			box-shadow 0.2s ease-in-out,
			background-color 0.2s ease-in-out;
		outline-style: solid;
		outline-width: 1px;
		outline-color: var(--color-primary-400);
		box-shadow: 0 0 12px 6px var(--color-primary-400-14);
		background: var(--color-primary-800-50);
	}

	#result {
		display: none;
	}
	#result.block {
		display: block !important;
	}
	@media only screen and (min-width: 768px) {
		.contact-content {
			display: grid;
			grid-template-rows: auto;
			grid-template-columns: auto 0.9fr;
			column-gap: 40px;
			row-gap: 80px;
		}
		.page-header {
			padding-bottom: 80px;
		}
		form {
			margin-top: -2px;
		}
	}
	@media only screen and (min-width: 768px) and (max-width: 1023.9px) {
		form {
			display: grid;
			grid-template-columns: 1fr 1fr;
			grid-template-rows: auto;
		}
		form > .field:nth-of-type(1) {
			grid-column: 1;
		}
		form > .field:nth-of-type(2) {
			grid-column: 1;
		}
		form > .field:nth-of-type(3) {
			grid-column: 1;
		}
		form > .field.textarea {
			grid-column: 2;
			grid-row: 1/3;
		}
		button {
			margin-top: auto;
		}
	}
	@media only screen and (min-width: 1024px) {
		.contact-content {
			padding-bottom: 120px;
			display: grid;
			grid-template-rows: auto;
			grid-template-columns: auto 0.9fr;
		}
		form {
			display: grid;
			grid-template-columns: 1fr 1fr 1fr;
			grid-template-rows: auto;
		}
		form .textarea {
			grid-column: 1/4;
		}
	}
</style>

<style is:global>
	.container {
		padding: 0 calc(var(--container-padding) / 2);
	}

	.contact-details svg {
		max-width: 1.5em;
		width: 1.5em;
	}
	.contact-details svg {
		fill: var(--color-primary-400);
		transition: filter 0.2s ease-in-out;
	}
	.contact-details a:hover svg {
		filter: drop-shadow(0px 0px 5px var(--color-primary-400-50));
	}
	:root {
		--sellers-width: 100%;
		--sellers-columns: 2;
		--sellers-rows-showed: 3;
		--sellers-rows-hidden: 3;
	}

	@media only screen and (min-width: 768px) {
		:root {
			--sellers-width: 100%;
			--sellers-columns: 3;
			--sellers-rows-showed: 2;
			--sellers-rows-hidden: 2;
		}
		.who-sells-us {
			grid-column: 1/3;
		}
	}

	@media only screen and (min-width: 1024px) {
		:root {
			--sellers-width: 100%;
			--sellers-columns: 6;
			--sellers-rows-showed: 1;
			--sellers-rows-hidden: 1;
		}
	}
</style>
<script src="https://web3forms.com/client/script.js" async defer></script>
<script is:inline>
	document.addEventListener(
		"astro:page-load",
		function () {
			$("body").removeClass();
			$("body").addClass("contact-page");

			contactForm();
		},
		{ once: true }
	);

	function contactForm() {
		const form = document.getElementById("form");
		const result = document.getElementById("result");

		form.addEventListener("submit", function (e) {
			const formData = new FormData(form);
			e.preventDefault();
			var object = {};
			formData.forEach((value, key) => {
				object[key] = value;
			});
			var json = JSON.stringify(object);
			result.classList.add("block");
			result.innerHTML = "Odesílání...";

			fetch("https://api.web3forms.com/submit", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
					Accept: "application/json",
				},
				body: json,
			})
				.then(async (response) => {
					let json = await response.json();
					if (response.status == 200) {
						result.innerHTML = "Zpráva byla úspěšně odeslána. Děkujeme za Váš zájem.";
					} else {
						console.log(response);
						result.innerHTML = "Ooop! Něco se pokazilo. Zkuste to znova nebo nás kontaktujte přímo na e-mailu.";
					}
				})
				.catch((error) => {
					console.log(error);
					result.innerHTML = "Ooop! Něco se pokazilo. Zkuste to znova nebo nás kontaktujte přímo na e-mailu.";
				})
				.then(function () {
					form.reset();
					setTimeout(() => {
						result.classList.remove("block");
					}, 5000);
				});
		});
	}
</script>
