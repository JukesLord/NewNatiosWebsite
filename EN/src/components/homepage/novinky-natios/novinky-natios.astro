---
import SectionHeader from "@components/section-header.astro";
import SectionBackgroundText from "@components/section-background-text.astro";
import HexagonLarge from "@components/hexagons/natios-new-products/hexagon-large.astro";
import HexagonMedium from "@components/hexagons/natios-new-products/hexagon-medium.astro";
import HexagonSmall from "@components/hexagons/natios-new-products/hexagon-small.astro";
import HexagonLargeMobile from "@components/hexagons/natios-new-products/mobile-hexagon-large.astro";
import HexagonMediumMobile from "@components/hexagons/natios-new-products/mobile-hexagon-medium.astro";
import HexagonSmallMobile from "@components/hexagons/natios-new-products/mobile-hexagon-small.astro";
import ArrowLeftEmpty from "@components/arrows/arrowLeftEmpty.astro";
import ArrowRightEmpty from "@components/arrows/arrowRightEmpty.astro";
import { Image } from "astro:assets";
import productImage1 from "@assets/images/products/calcium-chelated-complex-200-100/calcium-chelated-complex-200-100-front.webp";
import productImage2 from "@assets/images/products/krill-oil-astaxanthin-500-60/krill-oil-astaxanthin-500-60-front.webp";
import productImage3 from "@assets/images/products/betaglucan-500-90/betaglucan-500-90-front.webp";
import productImage4 from "@assets/images/products/potassium-magnesium-100/potassium-magnesium-100-front.webp";
import productImage5 from "@assets/images/products/glycine-1000-100/glycine-1000-100-front.webp";
import productImage6 from "@assets/images/products/taurine-1000-100/taurine-1000-100-front.webp";

const alt1 = "NATIOS Calcium Chelated Complex";
const alt2 = "NATIOS Krill Oil Astaxanthin";
const alt3 = "NATIOS Betaglucan";
const alt4 = "NATIOS Potassium & Magnesium";
const alt5 = "NATIOS Glycine Extra Strength";
const alt6 = "NATIOS Taurine Extra Strength";
import MoreInfo from "@components/more-info.astro";

const loading = "lazy";
const productImageWidth = 291;
const productDensities = [1, 1.5, 2, 2.5, 3];
const quality = 90;
---

<section id="brand-news" class="brand-news">
	<SectionHeader
		headerText="New Products"
		marginTopMOB="3em"
		marginTopPC=".25em"
		paddingTopMOB="1em"
		paddingTopPC="2em"
		paddingBottomMOB="1.4em"
		paddingBottomPC="3.15em"
	/>

	<SectionBackgroundText
		backgroundText="New Products"
		top="10%"
		left="00%"
		translateX="0"
		translateY="0"
		opacity="0.08"
	/>
	<div class="brand-news-content">
		<div class="brand-new-product-assets">
			<div class="hexagon hexagon-large pc">
				<HexagonLarge />
			</div>
			<div class="hexagon hexagon-medium pc">
				<HexagonMedium />
			</div>
			<div class="hexagon hexagon-small pc">
				<HexagonSmall />
			</div>
			<div class="hexagon hexagon-large mobile">
				<HexagonLargeMobile />
			</div>
			<div class="hexagon hexagon-medium mobile">
				<HexagonMediumMobile />
			</div>
			<div class="hexagon hexagon-small mobile">
				<HexagonSmallMobile />
			</div>
			<div class="brand-new-product-images">
				<div class="brand-new-product-image">
					<Image
						src={productImage1}
						width={productImageWidth}
						densities={productDensities}
						alt={alt1}
						quality={quality}
						loading={loading}
					/>
				</div>
				<div class="brand-new-product-image">
					<Image
						src={productImage2}
						width={productImageWidth}
						densities={productDensities}
						alt={alt2}
						quality={quality}
						loading={loading}
					/>
				</div>
				<div class="brand-new-product-image">
					<Image
						src={productImage3}
						width={productImageWidth}
						densities={productDensities}
						alt={alt3}
						quality={quality}
						loading={loading}
					/>
				</div>
				<div class="brand-new-product-image">
					<Image
						src={productImage4}
						width={productImageWidth}
						densities={productDensities}
						alt={alt4}
						quality={quality}
						loading={loading}
					/>
				</div>
				<div class="brand-new-product-image">
					<Image
						src={productImage5}
						width={productImageWidth}
						densities={productDensities}
						alt={alt5}
						quality={quality}
						loading={loading}
					/>
				</div>
				<div class="brand-new-product-image">
					<Image
						src={productImage6}
						width={productImageWidth}
						densities={productDensities}
						alt={alt6}
						quality={quality}
						loading={loading}
					/>
				</div>
			</div>
		</div>
		<div class="brand-new-product-texts">
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Calcium Chelated Complex</h3>
					<p class="brand-new-product-description">
						The most effective, best absorbable and gentlest form for the stomach - <b>calcium bisglycinate</b>. Calcium
						is widely known to support the health of bones and teeth, but it also supports, for example, muscle
						activity, normal blood clotting and the transmission of nerve signals.
					</p>
					<p class="brand-new-product-description">
						Each capsule of this complex contains <b>200&nbsp;mg of elemental calcium</b>, which is further supplemented
						with <b>vitamins D3 and K2</b> in the form of MK-7.
					</p>

					<MoreInfo href="/product/calcium-chelated-complex-200-100" marginBottom="2em" />
				</div>
			</div>
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Krill Oil</h3>
					<p class="brand-new-product-description">
						Krill oil from Antarctic krill is a great way to support not only heart health, but also nervous system
						function, antioxidant protection and eye health. This shellfish oil is rich in omega-3 fatty acids,
						astaxanthin, choline and phospholipids. Thanks to this combination of naturally occurring substances, <b
							>maximum bioavailability and effectiveness are guaranteed</b
						>.
					</p>
					<p class="brand-new-product-description">
						Natios krill oil is produced with maximum emphasis on environmental sustainability and quality. It does not
						contain any additives, fillers, preservatives or other unnecessary substances.
					</p>
					<MoreInfo href="/product/krill-oil-astaxanthin-500-60" marginBottom="2em" />
				</div>
			</div>
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Betaglucan</h3>
					<p class="brand-new-product-description">
						A unique food supplement that contains effective betaglucans and is supplemented with Camu Camu fruits with
						a naturally high content of vitamin&nbsp;C. Natios Betaglucan is standardized to a minimum 80% content of
						1,3-1,6 betaglucans, which are obtained by modern methods from brewer's yeast <i>Saccharomyces cerevisiae</i
						>. No other substances, such as fillers or preservatives, are used in the production of this product. The
						product does not contain gluten or other allergens and is also suitable for vegans.
					</p>
					<MoreInfo href="/product/betaglucan-500-90" marginBottom="2em" />
				</div>
			</div>
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Potassium & Magnesium</h3>
					<p class="brand-new-product-description">
						The most effective, best absorbable and gentlest forms of minerals in one complex. This supplement combines
						potassium citrate and magnesium malate, which are forms that ensure <b
							>maximum absorption and gentleness on the stomach</b
						>. This complex is additionally enriched with vitamin B6 in its active form P-5-P. Each vegan capsule of
						this complex contains 100&nbsp;mg of potassium, 50&nbsp;mg of magnesium and 2&nbsp;mg of vitamin B6.
					</p>
					<MoreInfo href="/product/potassium-magnesium-100" marginBottom="2em" />
				</div>
			</div>
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Glycine Extra Strength</h3>
					<p class="new-product-description">
						Glycine is the simplest amino acid found in the human body. In the human body, glycine plays a key role in
						several important processes. Each vegan capsule contains 1000&nbsp;mg of pure glycine without the use of
						fillers, additives or preservatives.
					</p>
					<p class="new-product-description">
						Glycine is found naturally in various types of food, especially protein-rich foods such as meat, fish, eggs,
						legumes, soy, and dairy products. A high content of glycine can also be found in gelatin or collagen. It is
						a non-essential amino acid, which means that the body can synthesize glycine on its own. However,
						supplementation is especially suitable for those who want to use its <b>benefits to the maximum</b> or for people
						with low protein intake or liver disease.
					</p>

					<MoreInfo href="/product/glycine-1000-100" marginBottom="2em" />
				</div>
			</div>
			<div class="brand-new-product-text">
				<div class="text-animation-wrapper">
					<h3 class="brand-new-product-heading">NATIOS Taurine Extra Strength</h3>
					<p class="new-product-description">
						Taurine is an amino acid found in many tissues in the body, especially the <b
							>heart, brain, muscles and eyes</b
						>. It is considered a semi-essential amino acid, which means that under normal conditions the body can
						synthesize taurine on its own from other amino acids. However, in certain situations such as rapid growth,
						high physical stress, disease or specific metabolic disorders, the need for taurine may be higher than what
						the body can produce on its own.
					</p>
					<p class="new-product-description">
						Taurine is present in various animal foods such as meat, fish and seafood. Since taurine does not occur
						naturally in plant foods, vegetarians and vegans may have lower levels of taurine if their diet is not
						optimized.
					</p>

					<MoreInfo href="/product/taurine-1000-100" marginBottom="2em" />
				</div>
			</div>
		</div>

		<div class="brand-new-product-arrows">
			<ArrowLeftEmpty />
			<ArrowRightEmpty />
		</div>
	</div>
</section>

<style>
	.brand-new-product-assets {
		display: grid;
		align-items: center;
		justify-items: center;
	}
	.brand-new-product-assets > * {
		grid-row: 1;
		grid-column: 1;
	}

	.hexagon-large {
		width: clamp(181px, 24.173vw + 90.064px, 554px);
	}
	.hexagon-medium {
		width: clamp(141px, 18.859vw + 70.272px, 432px);
	}
	.hexagon-small {
		width: clamp(34px, 4.584vw + 17.072px, 105px);
	}
	.hexagon-large,
	.hexagon-medium {
		transform: rotate(-15deg);
	}
	.hexagon-small {
		transform: translate(200%, -260%) rotate(225deg);
	}
	.brand-new-product-images {
		display: grid;
		align-items: center;
		justify-items: center;
		z-index: 1;
	}

	.brand-new-product-image {
		width: clamp(100px, 12.37vw + 53.488px, 291px);
		grid-row: 1;
		grid-column: 1;
		opacity: 0;
	}
	.brand-new-product-image img {
		transform: skew(2deg, -2deg) rotate(7deg);
	}
	.brand-new-product-image.active {
		opacity: 1;
	}

	.brand-new-product-texts {
		display: grid;
		align-items: start;
		justify-items: center;
	}
	.brand-new-product-text {
		grid-row: 1;
		grid-column: 1;
		opacity: 0;
		user-select: none;
		pointer-events: none;
	}
	.brand-new-product-text.active {
		user-select: auto;
		pointer-events: auto;
	}

	h3 {
		font-size: var(--fs-26-20);
		color: var(--color-primary-400);
		line-height: var(--lh-1_2);
		font-weight: var(--fw-regular);
		padding-bottom: 0.9em;
		padding-top: 2em;
	}
	p {
		font-size: var(--fs-16-12);
		color: var(--color-white);
		line-height: var(--lh-1_25);
		font-weight: var(--fw-book);
		padding-bottom: 1em;
	}
	.brand-new-product-description:last-of-type {
		padding-bottom: 1.5em;
	}
	.brand-new-product-arrows {
		display: flex;
		gap: 7%;
		justify-content: center;
		width: clamp(96px, 3.238vw + 83.8px, 146px);
		margin: 0 auto 0 auto;
	}

	@media only screen and (max-width: 356px) {
	}
	@media only screen and (max-width: 768px) {
		.pc {
			display: none;
		}
	}

	@media only screen and (min-width: 768px) {
		.brand-news-content {
			display: grid;
			grid-template-rows: auto auto;
			grid-template-columns: 55% 45%;
		}
		.brand-new-product-assets {
			grid-column: 2;
			grid-row: 1/3;
			margin-bottom: 20px;
			opacity: 0;
			transition: opacity 1.5s;
			transition-delay: 0.3s;
		}
		.brand-news-content.active .brand-new-product-assets {
			opacity: 1;
		}
		.brand-new-product-texts {
			padding-right: 12%;
		}
		h3 {
			padding-bottom: 1.15em;
			padding-top: 0;
		}
		p {
			line-height: var(--lh-1_5);
			padding-bottom: 1em;
		}

		.brand-new-product-description:last-child {
			padding-bottom: 6.25em;
		}
		.mobile {
			display: none;
		}

		.brand-new-product-arrows {
			margin: 0 auto auto 0;
			padding-left: 4px;
		}
	}

	/*animace*/
	.brand-new-product-image {
		transition:
			transform 2s ease-in-out,
			opacity 1s ease-in-out;
	}
	.hexagon {
		transition: transform 1.1s ease-in-out;
	}
	.brand-news-content .brand-new-product-image {
		transform: translate(200vw, 0);
	}
	@media only screen and (min-width: 768px) {
		.brand-news-content .brand-new-product-image {
			transform: translate(100vw, 0);
		}
	}

	.brand-news-content .brand-new-product-image.active {
		transform: translate(0, 0);
	}
	.brand-new-product-assets.animating .hexagon-large {
		transform: rotate(-35deg) scale(0.9);
	}
	.brand-new-product-assets.animating .hexagon-medium {
		transform: rotate(25deg) scale(0.9);
	}
	.brand-new-product-assets.animating .hexagon-small {
		transform: translate(180%, -280%) rotate(250deg) scale(0.8);
	}
	.brand-new-product-text {
		display: grid;
		grid-template-rows: 1fr;
	}
	.brand-new-product-text.deactivating {
		animation: textGridAnimationOut 1.4s ease-in-out forwards;
	}
	.brand-new-product-text.active {
		animation: textGridAnimationIn 2s ease-in-out forwards;
		animation-delay: 0.5s;
	}
	.text-animation-wrapper {
		overflow: hidden;
	}

	@keyframes textGridAnimationOut {
		0% {
			grid-template-rows: 1fr;
			opacity: 1;
		}
		100% {
			grid-template-rows: 0fr;
			opacity: 0;
		}
	}
	@keyframes textGridAnimationIn {
		0% {
			grid-template-rows: 0fr;
			opacity: 0;
		}
		100% {
			grid-template-rows: 1fr;
			opacity: 1;
		}
	}
</style>

<script is:inline>
	document.addEventListener(
		"astro:page-load",
		function () {
			newsF();
		},
		{ once: true }
	);

	function newsF() {
		const animationDurationNews = 2000;
		const animationDurationNewsSmaller = 1150;
		let brandNews = $(".brand-news-content");
		let brandNewsProductPosition = 0;
		let brandNewsProductCount = $(".brand-new-product-image").length;
		let brandNewsProductsImages = $(".brand-new-product-image");
		let brandNewsProductsTexts = $(".brand-new-product-text");
		let brandNewsProductsAssets = $(".brand-new-product-assets");

		$(".brand-new-product-arrows .arrow-left").on("click", function () {
			if (brandNews.hasClass("animating")) {
				return;
			}
			brandNewsProductsImages.eq(brandNewsProductPosition).removeClass("active");
			brandNewsProductsTexts.eq(brandNewsProductPosition).removeClass("active").addClass("deactivating");
			brandNewsProductPosition = (brandNewsProductPosition - 1 + brandNewsProductCount) % brandNewsProductCount;
			brandNewsProductsImages.eq(brandNewsProductPosition).addClass("active");
			brandNewsProductsTexts.eq(brandNewsProductPosition).addClass("active");
		});

		$(".brand-new-product-arrows .arrow-right").on("click", function () {
			if (brandNews.hasClass("animating")) {
				return;
			}
			brandNewsProductsImages.eq(brandNewsProductPosition).removeClass("active");
			brandNewsProductsTexts.eq(brandNewsProductPosition).removeClass("active").addClass("deactivating");
			brandNewsProductPosition = (brandNewsProductPosition + 1) % brandNewsProductCount;
			brandNewsProductsImages.eq(brandNewsProductPosition).addClass("active");
			brandNewsProductsTexts.eq(brandNewsProductPosition).addClass("active");
		});

		$(".brand-new-product-arrows > *").on("click", function () {
			if (brandNews.hasClass("animating")) {
				return;
			}
			brandNews.addClass("animating");
			brandNewsProductsAssets.addClass("animating");
			setTimeout(function () {
				brandNews.removeClass("animating");
			}, animationDurationNews);
			setTimeout(function () {
				brandNewsProductsTexts.removeClass("deactivating");
				brandNewsProductsAssets.removeClass("animating");
			}, animationDurationNewsSmaller);
		});

		let brandNewProductTexts = $(".brand-new-product-texts");
		let brandNewProductTextsHeight;

		brandNewProductTextsHeight = brandNewProductTexts.height();
		brandNewProductTexts.css("min-height", brandNewProductTextsHeight);

		window.addEventListener("resize", function () {
			brandNewProductTexts.css("min-height", "0px");
			brandNewProductTextsHeight = brandNewProductTexts.height();
			brandNewProductTexts.css("min-height", brandNewProductTextsHeight);
		});

		let observer = new IntersectionObserver(function (entries) {
			// Loop over the entries
			entries.forEach(function (entry) {
				// If the element is visible
				if (entry.isIntersecting) {
					brandNewsProductsImages.first().addClass("active");
					brandNewsProductsTexts.first().addClass("active");
					brandNews.addClass("active");
					// Stop observing the element
					observer.unobserve(entry.target);
				}
			});
		});
		// Start observing
		observer.observe(document.querySelector(".brand-news-content"));
	}
</script>
